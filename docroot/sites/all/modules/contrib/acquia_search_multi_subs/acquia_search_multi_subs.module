<?php

include_once dirname(__FILE__) . '/lib/Drupal/SearchApiSolr/acquia_search_multi_subs.searchapisolr.inc';
include_once dirname(__FILE__) . '/lib/Drupal/Apachesolr/acquia_search_multi_subs.apachesolr.inc';
include_once dirname(__FILE__) . '/acquia_search_multi_subs.common.inc';

/**
 * Change the Acquia Search environment on the fly based on the
 * AH_SITE_ENVIRONMENT and AH_SITE_NAME server variable
 *
 * Implements hook_init().
 */
function acquia_search_multi_subs_init() {
  if (module_exists('search_api_solr')) {
    // if we are running search api solr we should execute the search api init hook
    acquia_search_multi_subs_searchapi_init();
  }
  if (module_exists('apachesolr')) {
    // if we are running apachesolr we should execute the apachesolr init hook
    acquia_search_multi_subs_apachesolr_init();
  }
}

/**
 * Implementation of hook_acquia_subscription_status().
 *
 * Needed to reinforce our override config setting
 */
function acquia_search_multi_subs_acquia_subscription_status($active, $subscription = FALSE) {
  if ($active) {
    acquia_search_multi_subs_init();
  }
}